<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rodhak | Register Your Business</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <style>
      :root {
        --primary-color: #642b73;
        --secondary-color: #c6426e;
        --success-color: #28a745;
        --border-radius: 8px;
        --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      body {
        background: linear-gradient(135deg, #f5f7fa 0%, #e9e9e9 100%);
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        min-height: 100vh;
      }

      .container {
        padding-top: 2rem;
        padding-bottom: 2rem;
      }

      .card {
        border: none;
        border-radius: var(--border-radius);
        box-shadow: var(--box-shadow);
        overflow: hidden;
      }

      .card-header {
        background: linear-gradient(
          to right,
          var(--primary-color),
          var(--secondary-color)
        );
        color: white;
        border: none;
        padding: 1.5rem 2rem;
      }

      .form-control:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 0.25rem rgba(100, 43, 115, 0.25);
      }

      .btn-primary {
        background: linear-gradient(
          to right,
          var(--primary-color),
          var(--secondary-color)
        );
        border: none;
        padding: 0.5rem 2rem;
        border-radius: 50px;
        transition: all 0.3s ease;
      }

      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
      }

      .btn-primary:disabled {
        background: #cccccc;
        transform: none;
        cursor: not-allowed;
      }

      .section-title {
        color: var(--primary-color);
        font-weight: 600;
        position: relative;
        padding-bottom: 0.5rem;
      }

      .section-title::after {
        content: "";
        position: absolute;
        left: 0;
        bottom: 0;
        height: 3px;
        width: 50px;
        background: linear-gradient(
          to right,
          var(--primary-color),
          var(--secondary-color)
        );
      }

      .section-description {
        color: #6c757d;
        font-size: 0.9rem;
      }

      .form-label {
        font-weight: 500;
        margin-bottom: 0.5rem;
      }

      .form-text {
        font-size: 0.85rem;
        color: #6c757d;
      }

      .form-check-input:checked {
        background-color: var(--primary-color);
        border-color: var(--primary-color);
      }

      .custom-file-input {
        position: relative;
        z-index: 2;
        width: 100%;
        height: calc(2.25rem + 2px);
        margin: 0;
        opacity: 0;
      }

      .custom-file-label {
        position: absolute;
        top: 0;
        right: 0;
        left: 0;
        z-index: 1;
        height: calc(2.25rem + 2px);
        padding: 0.375rem 0.75rem;
        line-height: 1.5;
        color: #495057;
        background-color: #fff;
        border: 1px solid #ced4da;
        border-radius: 0.25rem;
      }

      .custom-file-container {
        position: relative;
        margin-bottom: 1rem;
      }

      .loading-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.9);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
      }

      .loading-content {
        text-align: center;
        background: white;
        padding: 2rem;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        max-width: 90%;
        width: 400px;
      }

      .spinner {
        width: 60px;
        height: 60px;
        border: 5px solid #f3f3f3;
        border-top: 5px solid var(--primary-color);
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 0 auto 1.5rem;
      }

      .progress-container {
        height: 8px;
        background-color: #e9ecef;
        border-radius: 4px;
        margin: 1.5rem 0;
        overflow: hidden;
      }

      .progress-bar {
        height: 100%;
        background: linear-gradient(
          to right,
          var(--primary-color),
          var(--secondary-color)
        );
        border-radius: 4px;
        transition: width 0.5s ease;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .file-preview {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-top: 0.5rem;
      }

      .file-preview-item {
        background-color: #f8f9fa;
        border-radius: 4px;
        padding: 0.5rem 0.75rem;
        font-size: 0.85rem;
        display: flex;
        align-items: center;
      }

      .file-preview-item i {
        margin-right: 0.5rem;
        color: var(--primary-color);
      }

      .password-container {
        position: relative;
      }

      .password-toggle {
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
        background: none;
        border: none;
        font-size: 0.9rem;
        color: #6c757d;
        cursor: pointer;
      }

      .password-strength {
        height: 5px;
        margin-top: 5px;
        border-radius: 2px;
        background: #e9ecef;
        position: relative;
        overflow: hidden;
      }

      .password-strength-bar {
        height: 100%;
        width: 0;
        transition: width 0.3s, background-color 0.3s;
      }

      .strength-text {
        font-size: 0.75rem;
        margin-top: 5px;
      }

      .text-weak {
        color: #dc3545;
      }
      .text-medium {
        color: #ffc107;
      }
      .text-strong {
        color: #28a745;
      }

      .bar-weak {
        background-color: #dc3545;
        width: 30%;
      }
      .bar-medium {
        background-color: #ffc107;
        width: 70%;
      }
      .bar-strong {
        background-color: #28a745;
        width: 100%;
      }

      .input-valid {
        border-color: var(--success-color) !important;
      }

      .input-invalid {
        border-color: #dc3545 !important;
      }

      .invalid-feedback {
        display: none;
        font-size: 0.85rem;
      }

      .input-invalid + .invalid-feedback {
        display: block;
      }

      .form-check-label a {
        color: var(--primary-color);
        text-decoration: none;
      }

      .form-check-label a:hover {
        text-decoration: underline;
      }

      .field-icon {
        color: #adb5bd;
        width: 20px;
        margin-right: 10px;
      }

      .input-group-text {
        background-color: transparent;
      }

      .terms-container {
        max-height: 200px;
        overflow-y: auto;
        background: #f8f9fa;
        padding: 1rem;
        border-radius: 4px;
        font-size: 0.85rem;
        margin-bottom: 1rem;
      }

      .step-indicator {
        display: flex;
        justify-content: space-between;
        margin-bottom: 2rem;
      }

      .step {
        text-align: center;
        flex: 1;
        position: relative;
      }

      .step::after {
        content: "";
        position: absolute;
        width: 100%;
        height: 3px;
        background: #e9ecef;
        top: 15px;
        left: 50%;
        z-index: -1;
      }

      .step:last-child::after {
        content: none;
      }

      .step-number {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background: #e9ecef;
        color: #6c757d;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 0.5rem;
        font-weight: 600;
        font-size: 0.9rem;
      }

      .step.active .step-number {
        background: var(--primary-color);
        color: white;
      }

      .step.completed .step-number {
        background: var(--success-color);
        color: white;
      }

      .step-title {
        font-size: 0.8rem;
        color: #6c757d;
      }

      .step.active .step-title {
        color: var(--primary-color);
        font-weight: 500;
      }

      .step.completed .step-title {
        color: var(--success-color);
      }
    </style>
  </head>

  <body>
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-md-10 col-lg-8">
          <div class="card">
            <!-- Card header -->
            <div class="card-header d-flex align-items-center">
              <div>
                <h3 class="mb-0 fw-bold">Register Your Business</h3>
                <p class="mb-0 mt-1 text-white-50">
                  Join the Rodhak platform to manage your transport business
                </p>
              </div>
            </div>

            <!-- Card body -->
            <div class="card-body p-4 p-md-5">
              <form
                id="registrationForm"
                action="/api/v1/owner/register"
                method="POST"
                enctype="multipart/form-data"
                novalidate
              >
                <!-- Account section -->
                <div class="row mb-4">
                  <div class="col-md-4">
                    <h5 class="section-title">Account Information</h5>
                    <p class="section-description">
                      Please provide your accurate account details for
                      verification purposes.
                    </p>
                  </div>

                  <div class="col-md-8">
                    <div class="mb-3">
                      <div class="input-group">
                        <span class="input-group-text"
                          ><i class="fas fa-user field-icon"></i
                        ></span>
                        <div class="form-floating flex-grow-1">
                          <input
                            type="text"
                            class="form-control"
                            id="username"
                            name="username"
                            placeholder="Username"
                            required
                          />
                          <label for="username">Username</label>
                        </div>
                      </div>
                      <div class="form-text">
                        Please don't use spaces in your username.
                      </div>
                      <div class="invalid-feedback">
                        Please provide a username.
                      </div>
                    </div>

                    <div class="mb-3">
                      <div class="input-group">
                        <span class="input-group-text"
                          ><i class="fas fa-envelope field-icon"></i
                        ></span>
                        <div class="form-floating flex-grow-1">
                          <input
                            type="email"
                            class="form-control"
                            id="email"
                            name="email"
                            placeholder="Email address"
                            required
                          />
                          <label for="email">Email address</label>
                        </div>
                      </div>
                      <div class="invalid-feedback">
                        Please provide a valid email address.
                      </div>
                    </div>

                    <div class="mb-3">
                      <div class="input-group">
                        <span class="input-group-text"
                          ><i class="fas fa-building field-icon"></i
                        ></span>
                        <div class="form-floating flex-grow-1">
                          <input
                            type="text"
                            class="form-control"
                            id="business"
                            name="business"
                            placeholder="Business name"
                            required
                          />
                          <label for="business">Business name</label>
                        </div>
                      </div>
                      <div class="invalid-feedback">
                        Please provide your business name.
                      </div>
                    </div>

                    <div class="mb-3">
                      <div class="input-group">
                        <span class="input-group-text"
                          ><i class="fab fa-whatsapp field-icon"></i
                        ></span>
                        <div class="form-floating flex-grow-1">
                          <input
                            type="tel"
                            class="form-control"
                            id="phone"
                            name="phone"
                            placeholder="WhatsApp number"
                            required
                            pattern="[0-9]{10}"
                          />
                          <label for="phone">WhatsApp number</label>
                        </div>
                      </div>
                      <div class="form-text">
                        Enter a 10-digit mobile number.
                      </div>
                      <div class="invalid-feedback">
                        Please provide a valid 10-digit phone number.
                      </div>
                    </div>
                  </div>
                </div>

                <hr class="my-4" />

                <!-- Identity section -->
                <div class="row mb-4">
                  <div class="col-md-4">
                    <h5 class="section-title">Identity Verification</h5>
                    <p class="section-description">
                      Please upload a photo of your Aadhaar card or other
                      government ID for verification.
                    </p>
                  </div>

                  <div class="col-md-8">
                    <div class="mb-3">
                      <label for="file" class="form-label"
                        >Upload ID proof</label
                      >
                      <div class="custom-file-container">
                        <input
                          type="file"
                          class="form-control"
                          id="file"
                          name="image"
                          accept="image/*"
                          required
                        />
                      </div>
                      <div class="file-preview" id="selectedFiles"></div>
                      <div class="invalid-feedback">
                        Please upload your ID for verification.
                      </div>
                    </div>
                  </div>
                </div>

                <hr class="my-4" />

                <!-- Profile section -->
                <div class="row mb-4">
                  <div class="col-md-4">
                    <h5 class="section-title">Profile Image</h5>
                    <p class="section-description">
                      Upload a professional profile photo for your business
                      account.
                    </p>
                  </div>

                  <div class="col-md-8">
                    <div class="mb-3">
                      <label for="file2" class="form-label"
                        >Upload profile image</label
                      >
                      <div class="custom-file-container">
                        <input
                          type="file"
                          class="form-control"
                          id="file2"
                          name="legal"
                          accept="image/*"
                          required
                        />
                      </div>
                      <div class="file-preview" id="selectedFiles2"></div>
                      <div class="invalid-feedback">
                        Please upload a profile image.
                      </div>
                    </div>
                  </div>
                </div>

                <hr class="my-4" />

                <!-- Password section -->
                <div class="row mb-4">
                  <div class="col-md-4">
                    <h5 class="section-title">Security</h5>
                    <p class="section-description">
                      Create a strong password to secure your account.
                    </p>
                  </div>

                  <div class="col-md-8">
                    <div class="mb-3">
                      <div class="input-group">
                        <span class="input-group-text"
                          ><i class="fas fa-lock field-icon"></i
                        ></span>
                        <div
                          class="form-floating flex-grow-1 password-container"
                        >
                          <input
                            type="password"
                            class="form-control"
                            id="password"
                            name="password"
                            placeholder="Password"
                            required
                            minlength="8"
                          />
                          <label for="password">Password</label>
                          <button
                            type="button"
                            class="password-toggle"
                            id="togglePassword"
                          >
                            <i class="fas fa-eye"></i>
                          </button>
                        </div>
                      </div>
                      <div class="password-strength">
                        <div
                          class="password-strength-bar"
                          id="passwordStrengthBar"
                        ></div>
                      </div>
                      <div
                        class="strength-text"
                        id="passwordStrengthText"
                      ></div>
                      <div class="invalid-feedback">
                        Please create a password with at least 8 characters.
                      </div>
                    </div>

                    <div class="mb-3">
                      <div class="input-group">
                        <span class="input-group-text"
                          ><i class="fas fa-lock field-icon"></i
                        ></span>
                        <div class="form-floating flex-grow-1">
                          <input
                            type="password"
                            class="form-control"
                            id="confirmPassword"
                            placeholder="Confirm password"
                            required
                          />
                          <label for="confirmPassword">Confirm password</label>
                        </div>
                      </div>
                      <div class="invalid-feedback" id="passwordMatchFeedback">
                        Passwords do not match.
                      </div>
                    </div>
                  </div>
                </div>

                <hr class="my-4" />

                <!-- Terms and conditions -->
                <div class="row mb-4">
                  <div class="col-md-4">
                    <h5 class="section-title">Terms & Conditions</h5>
                    <p class="section-description">
                      Please read and agree to our terms and conditions.
                    </p>
                  </div>

                  <div class="col-md-8">
                    <div class="terms-container">
                      <h6>Welcome to Rodhak</h6>
                      <p>
                        By accessing or using the Website, you agree to be bound
                        by these Terms of Service (the "Terms"). If you do not
                        agree to these Terms, please do not use the Website.
                      </p>
                      <ul>
                        <li>
                          <strong>Eligibility:</strong> You must be 18 years of
                          age or older to use the Website. By using the Website,
                          you represent and warrant that you meet this
                          eligibility requirement.
                        </li>
                        <li>
                          <strong>Governing Law:</strong> These Terms shall be
                          governed by and construed in accordance with the laws
                          of the jurisdiction in which the Website is based,
                          without giving effect to any principles of conflicts
                          of law.
                        </li>
                        <li>
                          <strong>Changes to these Terms:</strong> The Website
                          reserves the right to modify these Terms at any time.
                          Your continued use of the Website after any changes
                          have been made indicates your acceptance of the new
                          Terms.
                        </li>
                        <li>
                          <strong>Contact Us:</strong> If you have any questions
                          or concerns about these Terms, please contact us at
                          the email address provided on the Website.
                        </li>
                      </ul>
                    </div>

                    <div class="form-check mb-3">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        id="termsCheckbox"
                        required
                      />
                      <label class="form-check-label" for="termsCheckbox">
                        I have read and agree to the
                        <a
                          href="#"
                          data-bs-toggle="modal"
                          data-bs-target="#termsModal"
                          >Terms and Conditions</a
                        >
                      </label>
                      <div class="invalid-feedback">
                        You must agree to the terms and conditions.
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Form buttons -->
                <div class="d-flex justify-content-end mt-4">
                  <button
                    type="submit"
                    class="btn btn-primary btn-lg"
                    id="submitButton"
                  >
                    <span
                      class="spinner-border spinner-border-sm d-none me-2"
                      id="submitSpinner"
                      role="status"
                      aria-hidden="true"
                    ></span>
                    Register Now
                  </button>
                </div>
              </form>
            </div>
          </div>

          <div class="text-center mt-3">
            <p class="text-muted">
              Already have an account?
              <a
                href="https://owner-dnd-rodhak.onrender.com/"
                style="color: var(--primary-color)"
                >Login here</a
              >
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Terms Modal -->
    <div
      class="modal fade"
      id="termsModal"
      tabindex="-1"
      aria-labelledby="termsModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-scrollable">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="termsModalLabel">
              Terms and Conditions
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <h6>Welcome to Rodhak</h6>
            <p>
              By accessing or using the Website, you agree to be bound by these
              Terms of Service (the "Terms"). If you do not agree to these
              Terms, please do not use the Website.
            </p>
            <h6>1. Eligibility</h6>
            <p>
              You must be 18 years of age or older to use the Website. By using
              the Website, you represent and warrant that you meet this
              eligibility requirement.
            </p>
            <h6>2. User Accounts</h6>
            <p>
              When you create an account with us, you must provide accurate,
              complete, and current information. You are responsible for
              safeguarding the password and for all activities that occur under
              your account.
            </p>
            <h6>3. Privacy Policy</h6>
            <p>
              Your use of the Website is also governed by our Privacy Policy,
              which can be found on our website.
            </p>
            <h6>4. Content</h6>
            <p>
              You are responsible for all content that you post, upload, or
              otherwise make available via the Website.
            </p>
            <h6>5. Prohibited Uses</h6>
            <p>
              You agree not to use the Website for any illegal purpose or in
              violation of any local, state, national, or international law.
            </p>
            <h6>6. Termination</h6>
            <p>
              We reserve the right to terminate or suspend your account and bar
              access to the Website at our sole discretion, without notice, for
              conduct that we believe violates these Terms or is harmful to
              other users of the Website, us, or third parties, or for any other
              reason.
            </p>
            <h6>7. Governing Law</h6>
            <p>
              These Terms shall be governed by and construed in accordance with
              the laws of the jurisdiction in which the Website is based,
              without giving effect to any principles of conflicts of law.
            </p>
            <h6>8. Changes to these Terms</h6>
            <p>
              The Website reserves the right to modify these Terms at any time.
              Your continued use of the Website after any changes have been made
              indicates your acceptance of the new Terms.
            </p>
            <h6>9. Contact Us</h6>
            <p>
              If you have any questions or concerns about these Terms, please
              contact us at the email address provided on the Website.
            </p>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-primary"
              data-bs-dismiss="modal"
            >
              I Understand
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
      <div class="loading-content">
        <div class="spinner"></div>
        <h5 id="loadingMessage">Processing your registration</h5>
        <div class="progress-container">
          <div class="progress-bar" id="progressBar" style="width: 0%"></div>
        </div>
        <p class="text-muted" id="loadingStatus">Validating information...</p>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const form = document.getElementById("registrationForm");
        const submitButton = document.getElementById("submitButton");
        const submitSpinner = document.getElementById("submitSpinner");
        const loadingOverlay = document.getElementById("loadingOverlay");
        const progressBar = document.getElementById("progressBar");
        const loadingMessage = document.getElementById("loadingMessage");
        const loadingStatus = document.getElementById("loadingStatus");
        const passwordInput = document.getElementById("password");
        const confirmPasswordInput = document.getElementById("confirmPassword");
        const passwordStrengthBar = document.getElementById(
          "passwordStrengthBar"
        );
        const passwordStrengthText = document.getElementById(
          "passwordStrengthText"
        );
        const togglePasswordBtn = document.getElementById("togglePassword");

        // Toggle password visibility
        togglePasswordBtn.addEventListener("click", function () {
          const type =
            passwordInput.getAttribute("type") === "password"
              ? "text"
              : "password";
          passwordInput.setAttribute("type", type);
          this.querySelector("i").classList.toggle("fa-eye");
          this.querySelector("i").classList.toggle("fa-eye-slash");
        });

        // Password strength checker
        passwordInput.addEventListener("input", function () {
          const value = this.value;
          let strength = 0;
          let message = "";

          if (value.length >= 8) strength += 1;
          if (value.match(/[A-Z]/)) strength += 1;
          if (value.match(/[0-9]/)) strength += 1;
          if (value.match(/[^A-Za-z0-9]/)) strength += 1;

          switch (strength) {
            case 0:
              passwordStrengthBar.className = "password-strength-bar";
              passwordStrengthBar.style.width = "0%";
              passwordStrengthText.textContent = "";
              break;
            case 1:
              passwordStrengthBar.className = "password-strength-bar bar-weak";
              passwordStrengthText.textContent = "Weak password";
              passwordStrengthText.className = "strength-text text-weak";
              break;
            case 2:
              passwordStrengthBar.className =
                "password-strength-bar bar-medium";
              passwordStrengthText.textContent = "Medium password";
              passwordStrengthText.className = "strength-text text-medium";
              break;
            case 3:
            case 4:
              passwordStrengthBar.className =
                "password-strength-bar bar-strong";
              passwordStrengthText.textContent = "Strong password";
              passwordStrengthText.className = "strength-text text-strong";
              break;
          }
        });

        // Validate password match
        confirmPasswordInput.addEventListener("input", function () {
          if (this.value !== passwordInput.value) {
            this.classList.add("input-invalid");
            document.getElementById("passwordMatchFeedback").style.display =
              "block";
          } else {
            this.classList.remove("input-invalid");
            document.getElementById("passwordMatchFeedback").style.display =
              "none";
          }
        });

        // File preview handling
        document
          .getElementById("file")
          .addEventListener("change", function (e) {
            const fileList = document.getElementById("selectedFiles");
            fileList.innerHTML = "";
            for (let i = 0; i < this.files.length; i++) {
              fileList.innerHTML += `
              <div class="file-preview-item">
                <i class="fas fa-file-image"></i> ${this.files[i].name}
              </div>
            `;
            }
          });

        document
          .getElementById("file2")
          .addEventListener("change", function (e) {
            const fileList = document.getElementById("selectedFiles2");
            fileList.innerHTML = "";
            for (let i = 0; i < this.files.length; i++) {
              fileList.innerHTML += `
              <div class="file-preview-item">
                <i class="fas fa-file-image"></i> ${this.files[i].name}
              </div>
            `;
            }
          });

        // Form submission handler
        form.addEventListener("submit", function (event) {
          event.preventDefault();

          if (!this.checkValidity()) {
            event.stopPropagation();
            this.classList.add("was-validated");
            return;
          }

          if (passwordInput.value !== confirmPasswordInput.value) {
            confirmPasswordInput.classList.add("input-invalid");
            document.getElementById("passwordMatchFeedback").style.display =
              "block";
            return;
          }

          // Disable submit button and show spinner
          submitButton.disabled = true;
          submitSpinner.classList.remove("d-none");

          // Show loading overlay with progress simulation
          loadingOverlay.style.display = "flex";
          simulateProgress();

          // Submit the form after a slight delay to show loading state
          setTimeout(() => {
            this.submit();
          }, 1000);
        });

        // Simulate progress for loading overlay
        function simulateProgress() {
          let progress = 0;
          const interval = setInterval(() => {
            progress += 5;
            progressBar.style.width = `${Math.min(progress, 95)}%`;

            if (progress === 20) {
              loadingStatus.textContent = "Validating documents...";
            } else if (progress === 50) {
              loadingStatus.textContent = "Processing images...";
            } else if (progress === 75) {
              loadingStatus.textContent = "Almost there...";
            }

            if (progress >= 95) {
              clearInterval(interval);
            }
          }, 300);

          // If submission takes too long, show a message
          setTimeout(() => {
            if (loadingOverlay.style.display === "flex") {
              loadingMessage.textContent =
                "This is taking longer than expected";
              loadingStatus.textContent =
                "Please wait while we complete your registration";
            }
          }, 10000);
        }

        // Reset form state if user navigates back
        window.addEventListener("pageshow", function (event) {
          if (event.persisted) {
            submitButton.disabled = false;
            submitSpinner.classList.add("d-none");
            loadingOverlay.style.display = "none";
            form.classList.remove("was-validated");
          }
        });
      });
    </script>
  </body>
</html>
